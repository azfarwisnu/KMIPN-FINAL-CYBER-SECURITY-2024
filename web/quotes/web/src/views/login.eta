<!DOCTYPE html>
<html lang="en">

<head>
    <title>Log-In</title>
    <%~ includeFile('dess/heading', it) %>
    <style>
        body {
            background-image: url('stickers/background.png');
            background-size: cover;
            background-repeat: no-repeat;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="container mt-5 border rounded" style="width: 25rem;">
        <div class="p-3">
            <h2 class="mb-4 mt-3">Log-In</h2>
            <div class="form-group mb-3">
                <label for="username">Username</label>
                <input type="text" name="username" id="username" class="form-control" autofocus>
            </div>
            <div class="form-group mb-3">
                <label for="password">Password</label>
                <input type="password" name="password" id="password" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary mt-3 mb-3" id="login">Go</button>
        </div>
    </div>

    <script nonce="<%= it.nonce %>">
        login.addEventListener('click', () => {
            fetch('/api/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    username: username.value,
                    password: password.value
                })
            })
                .then(res => res.json())
                .then(data => {
                    if (data.success)
                        location = '/quotes'
                    else
                        alert(data.message)
                })
        })

        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter')
                login.click()
        })

    </script>

</body>

</html>
